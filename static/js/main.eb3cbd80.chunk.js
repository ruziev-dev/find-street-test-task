(this["webpackJsonpfind-street-test-task"]=this["webpackJsonpfind-street-test-task"]||[]).push([[0],{56:function(t,e,n){},61:function(t,e,n){"use strict";n.r(e);var r=n(6),a=n(0),c=n.n(a),s=n(9),i=n.n(s),u=(n(56),n(13)),o=n.n(u),l=n(18),j=n(12),p=n(36),d={mode:"cors",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Token 35c1b92f08dcd22fce83bc90ae710f7b6fcdf6af"}},b={getMyIP:function(){var t=Object(l.a)(o.a.mark((function t(){var e,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://ipapi.co/json/");case 2:return e=t.sent,t.next=5,e.json();case 5:return n=t.sent,t.abrupt("return",n.ip);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),getMyCity:function(){var t=Object(l.a)(o.a.mark((function t(e){var n,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://suggestions.dadata.ru/suggestions/api/4_1/rs/iplocate/address?ip="+e,Object(p.a)({method:"GET"},d));case 2:return n=t.sent,t.next=5,n.json();case 5:return r=t.sent,t.abrupt("return",r.location.data.city);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),getStreets:function(){var t=Object(l.a)(o.a.mark((function t(e){var n,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://suggestions.dadata.ru/suggestions/api/4_1/rs/suggest/address",Object(p.a)(Object(p.a)({method:"POST"},d),{},{body:JSON.stringify({query:e,count:5})}));case 2:return n=t.sent,t.next=5,n.json();case 5:return r=t.sent,t.abrupt("return",r.suggestions);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},f=n(92),O=n(103),h=function(t){var e=t.ip,n=t.city,c=Object(a.useState)(null),s=Object(j.a)(c,2),i=s[0],u=s[1],o=Object(a.useState)(!1),l=Object(j.a)(o,2),p=l[0],d=l[1],b=function(){d(!0),u("\u0412\u044b \u043d\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u044f\u0442\u044c \u044d\u0442\u0438 \u043f\u043e\u043b\u044f")},h=function(){d(!1),u(null)};return Object(r.jsxs)(f.a,{container:!0,spacing:3,children:[Object(r.jsx)(f.a,{item:!0,xs:!0,style:{paddingTop:"30px"},children:Object(r.jsx)(O.a,{onClick:b,onBlur:h,error:p,helperText:i,id:"outlined-read-only-input",label:"\u0412\u0430\u0448 IP \u0430\u0434\u0440\u0435\u0441",defaultValue:e,InputProps:{readOnly:!0},fullWidth:!0,variant:"filled"})}),Object(r.jsx)(f.a,{item:!0,xs:!0,style:{paddingTop:"30px"},children:Object(r.jsx)(O.a,{onClick:b,onBlur:h,error:p,helperText:i,id:"outlined-read-only-input",label:"\u0412\u0430\u0448 \u0433\u043e\u0440\u043e\u0434",defaultValue:n,InputProps:{readOnly:!0},fullWidth:!0,variant:"filled"})})]})},x=new RegExp("^[a-zA-Z\u0410-\u042f\u0430-\u044f]*$"),y=function(t){var e=t.searchStreet,n=Object(a.useState)(""),c=Object(j.a)(n,2),s=c[0],i=c[1],u=Object(a.useState)(!1),o=Object(j.a)(u,2),l=o[0],p=o[1],d=Object(a.useState)(null),b=Object(j.a)(d,2),h=b[0],y=b[1];return Object(r.jsx)(f.a,{item:!0,xs:!0,children:Object(r.jsx)(O.a,{onChange:function(t){var e=t.target.value;i(e),x.test(e)?(p(!1),y(null)):(p(!0),y("\u0412 \u043f\u043e\u043b\u0435 \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0431\u0443\u043a\u0432\u044b"))},id:"outlined-full-width",value:s,label:"\u041d\u0430\u0447\u043d\u0438\u0442\u0435 \u0432\u0432\u043e\u0434\u0438\u0442\u044c \u0430\u0434\u0440\u0435\u0441 \u0438 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 Enter",placeholder:"\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 \u041b\u0435\u043d\u0438\u043d\u0430",helperText:h,fullWidth:!0,margin:"normal",autoFocus:!0,onKeyPress:function(t){"Enter"===t.key&&(""===s?(p(!0),y("\u041f\u043e\u043b\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c")):(p(!1),y(null),e(s),i("")))},error:l,InputLabelProps:{shrink:!0},variant:"outlined"})})},g=n(97),v=n(96),m=n(104),w=n(98),k=Object(g.a)((function(t){return{root:{width:"100%",backgroundColor:t.palette.background.paper}}})),S=function(t){var e=t.streetsArray,n=k();return e?Object(r.jsx)("div",{className:n.root,children:Object(r.jsx)(v.a,{children:e.map((function(t){var e=t.data.street_with_type?t.data.street_with_type:"";return Object(r.jsx)(m.a,{button:!0,children:Object(r.jsx)(w.a,{primary:"".concat(t.data.region," ").concat(e)})},t.data.fias_id)}))})}):null},T=n(99),P=function(t){var e=t.ip,n=t.city,c=Object(a.useState)(null),s=Object(j.a)(c,2),i=s[0],u=s[1],p=function(){var t=Object(l.a)(o.a.mark((function t(e){var r,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="".concat(n," ").concat(e),t.next=3,b.getStreets(r);case 3:a=t.sent,console.log(a),u(a);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)(T.a,{fixed:!0,justify:"center",children:[Object(r.jsx)(h,{ip:e,city:n}),Object(r.jsx)(y,{searchStreet:p}),Object(r.jsx)(S,{streetsArray:i})]})})},C=n(100),I=n(101),_=n(37),E=n(102),A=function(){var t=Object(a.useState)(!1),e=Object(j.a)(t,2),n=e[0],c=e[1],s=Object(a.useState)(null),i=Object(j.a)(s,2),u=i[0],p=i[1],d=Object(a.useState)(null),f=Object(j.a)(d,2),O=f[0],h=f[1];return Object(a.useEffect)((function(){(function(){var t=Object(l.a)(o.a.mark((function t(){var e,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.getMyIP();case 2:return e=t.sent,p(e),t.next=6,b.getMyCity(e);case 6:n=t.sent,console.log(n),h(n),c(!0);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(C.a,{position:"static",children:Object(r.jsx)(I.a,{children:Object(r.jsx)(_.a,{variant:"h5",children:"\u041f\u043e\u0438\u0441\u043a \u0443\u043b\u0438\u0446 \u0442\u0432\u043e\u0435\u0433\u043e \u0433\u043e\u0440\u043e\u0434\u0430"})})}),n?Object(r.jsx)(P,{ip:u,city:O}):Object(r.jsx)(E.a,{})]})};i.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(A,{})}),document.getElementById("root"))}},[[61,1,2]]]);
//# sourceMappingURL=main.eb3cbd80.chunk.js.map